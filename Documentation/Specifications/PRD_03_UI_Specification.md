# AI Coding Knowledge Hub - UI仕様書

**バージョン**: 1.0
**作成日**: 2026-02-01
**関連**: [PRD_01_Overview.md](PRD_01_Overview.md), [PRD_02_Technical.md](PRD_02_Technical.md)
**モックアップ**: [Documentation/mockup/](../mockup/)

---

## 1. 概要

### 1.1 目的
本ドキュメントは、AI Coding Knowledge Hub のUI/UX仕様を定義する。HTMLモックアップのレビュー結果を反映し、実装時の指針とする。

### 1.2 デザイン原則

| 原則 | 説明 |
|------|------|
| **直感的** | 初見でも操作方法がわかる |
| **効率的** | 最小クリックで目的を達成 |
| **情報密度** | 必要な情報を適切に表示 |
| **一貫性** | 共通パターンの徹底 |

### 1.3 技術スタック

- **フレームワーク**: Next.js 14 (App Router)
- **スタイリング**: Tailwind CSS
- **アイコン**: Lucide React
- **状態管理**: React Server Components + Client Components

---

## 2. 共通仕様

### 2.1 レイアウト構造

```
┌─────────────────────────────────────────────────────────┐
│ サイドバー (w-64)  │  メインコンテンツ (flex-1)         │
│ ┌─────────────┐   │  ┌─────────────────────────────┐   │
│ │ ロゴ        │   │  │ ヘッダー                    │   │
│ ├─────────────┤   │  ├─────────────────────────────┤   │
│ │ ナビゲーション│  │  │                             │   │
│ │             │   │  │ ページコンテンツ             │   │
│ │             │   │  │                             │   │
│ └─────────────┘   │  └─────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

### 2.2 カラーパレット

| 用途 | クラス | 説明 |
|------|--------|------|
| サイドバー背景 | `bg-gray-900` | ダークグレー |
| メイン背景 | `bg-gray-100` | ライトグレー |
| カード背景 | `bg-white` | 白 |
| プライマリ | `bg-blue-600` | アクションボタン |
| 成功 | `bg-green-600` | 承認、有効 |
| 警告 | `bg-yellow-500` | 未レビュー、下書き |
| 危険 | `bg-red-600` | 却下、エラー |

### 2.3 ステータスバッジ

| ステータス | 背景色 | テキスト色 | 表示例 |
|-----------|--------|-----------|--------|
| 未レビュー | `bg-yellow-100` | `text-yellow-800` | 未レビュー |
| 承認済み | `bg-green-100` | `text-green-800` | 承認済み |
| 却下 | `bg-gray-100` | `text-gray-800` | 却下 |
| 分析失敗 | `bg-red-100` | `text-red-800` | 分析失敗 |
| 公開済み | `bg-green-100` | `text-green-800` | 公開済み |
| 下書き | `bg-yellow-100` | `text-yellow-800` | 下書き |

### 2.4 評価スコア表示

```
★★★★★ (5) - 最高評価
★★★★☆ (4) - 高評価
★★★☆☆ (3) - 中評価
★★☆☆☆ (2) - 低評価
★☆☆☆☆ (1) - 最低評価
```

**表示色**: `text-yellow-500`

### 2.5 空状態（Empty States）

すべての一覧画面で、データが0件の場合は空状態UIを表示する。

```
┌─────────────────────────────────────┐
│         [アイコン]                  │
│                                     │
│    データがありません                │
│    [説明文・次のアクション案内]      │
│                                     │
│    [アクションボタン]（任意）        │
└─────────────────────────────────────┘
```

| 画面 | メッセージ | アクション |
|------|-----------|-----------|
| 記事一覧 | 記事がありません | ソースを追加して収集を実行してください |
| ソース管理 | 監視対象サイトがありません | ソースを追加 |
| レポート一覧 | レポートがありません | レポートを生成 |

---

## 3. 画面別仕様

### 3.1 ダッシュボード（`/`）

#### 3.1.1 統計カード

| カード | 値 | アイコン | 備考 |
|--------|-----|---------|------|
| 今週の収集 | 件数 | `download` | 青色 |
| 未レビュー | 件数 | `clock` | 黄色（警告） |
| 承認済み | 件数 | `check-circle` | 緑色 |
| 今月のAI分析 | 件数/上限 | `cpu` | 紫色 |

**追加仕様（v1.0改善）**:
- 各カードに前週比の増減率を表示（例: `+5%` / `-3%`）
- 増加は緑テキスト、減少は赤テキスト

```
┌─────────────────────┐
│ 今週の収集          │
│ 45        +12%      │
│           ↑ 前週比  │
└─────────────────────┘
```

#### 3.1.2 クイックアクション

ダッシュボードヘッダーにクイックアクションボタンを配置。

| ボタン | アイコン | 動作 |
|--------|---------|------|
| 収集実行 | `play` | 記事収集ジョブを実行 |
| レポート生成 | `file-plus` | レポート生成モーダルを開く |

#### 3.1.3 最近の記事リスト

- 表示件数: 10件
- 表示項目: 評価スコア、タイトル、ソース、日付、ステータスバッジ
- アクション: レビュー（未レビュー時）、詳細（レビュー済み時）、再分析（失敗時）

---

### 3.2 記事一覧（`/articles`）

#### 3.2.1 フィルター

| フィルター | タイプ | 選択肢 |
|-----------|--------|--------|
| ステータス | Select | すべて / 未レビュー / 承認済み / 却下 / 分析失敗 |
| ソース | Select | すべて / [登録ソース一覧] |
| 重要度 | Select | すべて / ★5 / ★4以上 / ★3以上 |
| 検索 | Text | タイトルで検索 |

**追加仕様（v1.0改善）**:
- **ソート機能**: 日付順（デフォルト）、重要度順、有用度順
- ソートドロップダウンをフィルター横に配置

```
[ステータス▼] [ソース▼] [重要度▼] [並び替え: 重要度順▼] [検索...]
```

#### 3.2.2 記事カード

```
┌─────────────────────────────────────────────────┐
│ [ステータスバッジ]                    ★★★★☆ │
│ [☐] タイトル（リンク）                         │
│ 要約テキスト（2行で切り捨て）...               │
│ [ソース] 2026-01-30    [タグ1][タグ2]         │
├─────────────────────────────────────────────────┤
│                              [レビュー]        │
└─────────────────────────────────────────────────┘
```

**追加仕様（v1.0改善）**:
- **チェックボックス**: 一括操作用（左上に配置）
- 分析失敗カードは左ボーダーを赤色に

#### 3.2.3 一括操作（Bulk Actions）

チェックボックス選択時にフローティングバーを表示。

```
┌─────────────────────────────────────────────────┐
│ 3件選択中    [すべて却下] [すべて承認] [×]     │
└─────────────────────────────────────────────────┘
```

| アクション | 確認 | 備考 |
|-----------|------|------|
| すべて却下 | モーダル確認 | 人間評価は入力されない |
| すべて承認 | モーダル確認 | 人間評価は入力されない |

#### 3.2.4 ページネーション

- 1ページあたり: 20件（設定変更可: 10/20/50）
- 表示: `全 150 件中 1-20 件を表示`
- ナビゲーション: 前へ / [1][2][3]...[8] / 次へ

---

### 3.3 記事詳細・レビュー（`/articles/[id]`）

#### 3.3.1 レイアウト

```
┌─────────────────────────────────────────────────────────┐
│ ← 戻る | 記事詳細                    [ステータスバッジ] │
├─────────────────────────────────────────────────────────┤
│                              │                          │
│  [記事情報エリア]            │  [評価・レビューエリア]  │
│  - タイトル                  │  - AI評価               │
│  - メタ情報                  │  - 人間評価フォーム     │
│  - AI要約                    │  - アクションボタン     │
│  - 記事本文（抜粋）          │                          │
│                              │                          │
│  2/3幅                       │  1/3幅                   │
└─────────────────────────────────────────────────────────┘
```

#### 3.3.2 AI評価表示

**追加仕様（v1.0改善）**:
AI評価の根拠（`ai_reason`）を引用スタイルで強調表示。

```
┌─────────────────────────────────────┐
│ 重要度                    ★★★★☆ │
│ ┌─────────────────────────────────┐│
│ │ "開発効率に大きく影響する      ││
│ │  新機能の情報"                 ││
│ └─────────────────────────────────┘│
└─────────────────────────────────────┘
```

- 引用スタイル: `bg-gray-50 border-l-4 border-blue-500 pl-3 italic`

#### 3.3.3 人間評価フォーム

| 項目 | 入力形式 | 初期値 |
|------|---------|--------|
| 重要度 | 1-5ボタン選択 | AI評価値 |
| 有用度 | 1-5ボタン選択 | AI評価値 |
| 難易度 | 1-5ボタン選択 | AI評価値 |
| コメント | Textarea | 空 |

**追加仕様（v1.0改善）**:
- AI評価値をデフォルト選択状態にする（ユーザーの手間削減）

#### 3.3.4 アクションボタン

| ボタン | スタイル | 動作 |
|--------|---------|------|
| 却下 | `border border-gray-300` | status = 'rejected' で保存 |
| 承認 | `bg-green-600 text-white` | status = 'approved' で保存 |
| 再分析 | `bg-red-600 text-white` | 分析失敗時のみ表示 |

#### 3.3.5 キーボードショートカット（将来実装）

| キー | 動作 | 備考 |
|------|------|------|
| `A` | 承認 | Approve |
| `R` | 却下 | Reject |
| `←` / `→` | 前/次の記事に移動 | 一覧からの遷移時 |

---

### 3.4 ソース管理（`/sources`）

#### 3.4.1 ソース一覧テーブル

| カラム | 幅 | 内容 |
|--------|-----|------|
| サイト名 | auto | アイコン + 名前 |
| タイプ | 80px | RSS / Scrape バッジ |
| URL | auto | ドメイン表示 |
| ステータス | 100px | トグルスイッチ |
| 記事数 | 60px | 収集済み記事数 |
| 最終収集 | 120px | **新規追加** |
| 操作 | 120px | 編集 / 削除 |

**追加仕様（v1.0改善）**:
- **最終収集日時**: 最後に成功した収集日時を表示
- 24時間以上経過は警告色（`text-yellow-600`）

#### 3.4.2 ソース追加/編集モーダル

| フィールド | タイプ | 必須 | 備考 |
|-----------|--------|------|------|
| サイト名 | Text | ✓ | |
| タイプ | Select | ✓ | RSS / Scrape |
| サイトURL | URL | ✓ | |
| フィードURL | URL | | RSS選択時のみ表示 |
| スクレイピング設定 | Object | | Scrape選択時のみ表示 |
| - タイトルセレクタ | Text | | |
| - コンテンツセレクタ | Text | | |
| - リンクセレクタ | Text | | |

**追加仕様（v1.0改善）**:
- **接続テストボタン**: 入力内容で実際に取得テストを実行

```
┌─────────────────────────────────────┐
│ フィードURL                          │
│ [https://example.com/feed_______]   │
│                                      │
│ [接続テスト]                         │
│                                      │
│ ✓ 5件の記事を取得できました          │
│   - 記事タイトル1                    │
│   - 記事タイトル2                    │
│   ...                                │
└─────────────────────────────────────┘
```

#### 3.4.3 削除確認モーダル

```
┌─────────────────────────────────────┐
│ ソースを削除                         │
├─────────────────────────────────────┤
│ 「Zenn (Claude)」を削除しますか？    │
│                                      │
│ ⚠️ このソースから収集された28件の    │
│    記事も削除されます。              │
│                                      │
│        [キャンセル] [削除する]       │
└─────────────────────────────────────┘
```

---

### 3.5 レポート一覧（`/reports`）

#### 3.5.1 レポートカード

```
┌─────────────────────────────────────────────────┐
│ 週次レポート 2026年第5週       [ステータスバッジ] │
│ 2026/01/27 - 2026/02/02                          │
│                                                   │
│ [📄 15記事] [📅 生成: 2026/02/01]               │
│                                                   │
│ ハイライト:                                       │
│ • Claude Code MCP連携機能の追加                  │
│ • Anthropic APIの破壊的変更予告                  │
├───────────────────────────────────────────────────┤
│                    [プレビュー] [コピー] [詳細]   │
└───────────────────────────────────────────────────┘
```

**追加仕様（v1.0改善）**:
- **プレビューボタン**: モーダルで内容をクイック表示

#### 3.5.2 レポート生成モーダル

| フィールド | タイプ | デフォルト |
|-----------|--------|-----------|
| 開始日 | Date | 先週月曜日 |
| 終了日 | Date | 先週日曜日 |

- 対象記事数をリアルタイム表示
- 0件の場合は生成ボタンを無効化

#### 3.5.3 レポート詳細モーダル

**追加仕様（v1.0改善）**:
- **コピー形式選択**:

```
┌─────────────────────────────────────┐
│ コピー形式を選択                     │
├─────────────────────────────────────┤
│ [Markdown]  [Slack用]  [プレーン]   │
└─────────────────────────────────────┘
```

| 形式 | 説明 |
|------|------|
| Markdown | 見出し・リスト付きMarkdown |
| Slack用 | Slack記法に変換 |
| プレーン | 装飾なしテキスト |

---

## 4. レスポンシブ対応

### 4.1 ブレークポイント

| 名称 | 幅 | 対象 |
|------|-----|------|
| Mobile | < 768px | スマートフォン |
| Tablet | 768px - 1024px | タブレット |
| Desktop | > 1024px | PC |

### 4.2 モバイル対応方針

MVP（Phase 1）ではデスクトップ優先とし、以下のみ対応:

| 画面 | モバイル対応 |
|------|-------------|
| ダッシュボード | カード縦並び |
| 記事一覧 | カード1列表示 |
| 記事詳細 | 2ペイン → 縦積み |
| ソース管理 | テーブル → カード表示 |
| レポート | カード1列表示 |

### 4.3 モバイルサイドバー

- ハンバーガーメニューで開閉
- オーバーレイ表示
- スワイプで閉じる

---

## 5. コンポーネント一覧

### 5.1 共通UIコンポーネント

| コンポーネント | 用途 | Props |
|---------------|------|-------|
| `Button` | ボタン | variant, size, disabled |
| `Card` | カード | padding, shadow |
| `Badge` | バッジ | variant (status) |
| `Input` | 入力フィールド | type, placeholder, error |
| `Select` | セレクトボックス | options, value |
| `Textarea` | テキストエリア | rows, placeholder |
| `Modal` | モーダル | isOpen, onClose, title |
| `Toast` | 通知 | type, message, duration |
| `Toggle` | トグルスイッチ | checked, onChange |
| `Checkbox` | チェックボックス | checked, onChange |
| `StarRating` | 評価表示 | score, max |
| `ScoreInput` | スコア入力 | value, onChange, max |
| `EmptyState` | 空状態 | icon, title, description, action |
| `Pagination` | ページネーション | total, page, limit |

### 5.2 機能コンポーネント

| コンポーネント | 用途 |
|---------------|------|
| `Sidebar` | サイドバーナビゲーション |
| `Header` | ページヘッダー |
| `ArticleCard` | 記事カード |
| `ArticleFilter` | 記事フィルター |
| `ReviewPanel` | レビューパネル |
| `SourceTable` | ソーステーブル |
| `SourceForm` | ソース追加/編集フォーム |
| `ReportCard` | レポートカード |
| `ReportViewer` | レポート詳細表示 |

---

## 6. インタラクション仕様

### 6.1 ローディング状態

| 操作 | ローディング表示 |
|------|-----------------|
| ページ遷移 | トップバーにプログレスバー |
| データ取得 | スケルトンスクリーン |
| アクション実行 | ボタン内スピナー + 無効化 |

### 6.2 エラー表示

| エラー種別 | 表示方法 |
|-----------|---------|
| 入力エラー | フィールド下に赤テキスト |
| API エラー | Toast 通知（赤） |
| ページエラー | エラーページ（error.tsx） |

### 6.3 成功フィードバック

| 操作 | フィードバック |
|------|---------------|
| 保存完了 | Toast 通知（緑）「保存しました」 |
| 削除完了 | Toast 通知（緑）「削除しました」 |
| 収集完了 | Toast 通知（緑）「X件の記事を収集しました」 |

---

## 7. 承認履歴

| 日付 | バージョン | 内容 |
|------|-----------|------|
| 2026-02-01 | 1.0 | 初版作成（モックアップレビュー反映） |

---

## 8. 付録: 改善項目サマリー

モックアップレビューから追加された改善項目:

| # | 画面 | 改善項目 | 優先度 |
|---|------|---------|--------|
| 1 | ダッシュボード | 前週比の増減率表示 | 中 |
| 2 | ダッシュボード | クイックアクションボタン | 高 |
| 3 | 記事一覧 | 一括操作機能（Bulk Actions） | 高 |
| 4 | 記事一覧 | ソート機能（重要度順） | 高 |
| 5 | 記事詳細 | AI評価根拠の強調表示 | 中 |
| 6 | 記事詳細 | キーボードショートカット | 低 |
| 7 | ソース管理 | 接続テストボタン | 中 |
| 8 | ソース管理 | 最終収集日時の表示 | 高 |
| 9 | レポート | プレビュー機能 | 中 |
| 10 | レポート | コピー形式選択 | 中 |
| 11 | 全画面 | 空状態（Empty States） | 高 |
| 12 | 全画面 | モバイル対応（基本） | 低 |
