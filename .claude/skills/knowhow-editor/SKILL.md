---
name: knowhow-editor
description: |
  プロジェクトのルールファイル（CLAUDE.md等）およびスキルファイル（SKILL.md等）の作成・更新時の品質チェックと効率化。
  ルール作成、スキル作成、knowhow管理、ルール整合性チェック時に使用。
---

# Knowhow Editor – v1.0

> **Scope**: プロジェクトのルールファイル（`CLAUDE.md`等）およびスキルファイル（`SKILL.md`等）の作成・更新時の品質チェックと効率化

---

## 0. Identity

**name:** `knowhow-editor`
**version:** 1.0
**related:**
- `spec-writer`: 仕様書作成

---

## 1. Activation

**Trigger**:
- `CLAUDE.md` の作成・更新時
- `.claude/commands/*.md` の作成・更新時
- `.claude/skills/*/SKILL.md` の作成・更新時
- ルール/スキルのレビュー依頼時

**Keywords**: ルール作成、スキル作成、knowhow、ナレッジ管理、ルール整合性

---

## 2. Quality Checklist（必須チェック項目）

### 2.1 整合性チェック

| # | チェック項目 | 確認方法 |
|---|-------------|---------|
| C1 | **スキル連携フローが明確か** | 複数スキルの起動順序・併用ルールが定義されているか |
| C2 | **重複定義がないか** | 同じ概念が複数ファイルで定義されていないか |
| C3 | **参照先が存在するか** | 別ファイルへの参照が実際に存在するか |
| C4 | **用語が統一されているか** | 同じ概念に異なる名前を使っていないか |

### 2.2 効率性チェック

| # | チェック項目 | 目標値 |
|---|-------------|--------|
| E1 | **ファイル行数** | SKILL.md: 200行以下、CLAUDE.md: 120行以下 |
| E2 | **重複削除** | 表/リストの重複は1箇所に統合 |
| E3 | **階層化** | 詳細は別ファイルに分離（`patterns.md`等） |

### 2.3 明確性チェック（AIブレ防止）

| # | チェック項目 | 改善方法 |
|---|-------------|---------|
| A1 | **適用範囲が明確か** | 「いつ」「何に」適用するか表で定義 |
| A2 | **判断基準が具体的か** | 「〜すべき」→ 具体的条件を列挙 |
| A3 | **例外が明記されているか** | 「ただし〜の場合は除く」を明示 |
| A4 | **具体例があるか** | 抽象ルールには✅/❌の具体例を付記 |

---

## 3. Review Workflow

1. **現状分析**: 対象ファイル読み込み、行数・重複確認
2. **チェックリスト実行**: Section 2の項目を確認、問題を表で列挙
3. **改善提案**: 優先度順に提示、人間承認後に実行
4. **検証**: 整合性再チェック、Completion Report出力

---

## 4. Always / Never

**Always**:
- チェックリスト（Section 2）を全項目確認
- 重複は1箇所に統合し、他は参照に
- 適用範囲は表形式で明確化
- 抽象ルールには具体例を付記
- スキル更新時はVersion Historyも更新

**Never**:
- チェックなしでルール/スキルを作成
- 同じ定義を複数ファイルに記載
- 「〜すべき」だけの曖昧な記述
- 200行を超えるSKILL.md（分離すること）

---

## 5. Version History

**v1.0 (2026-01-31)**: 初版作成（Next.js/TypeScriptプロジェクト向け）
